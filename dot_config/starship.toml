# --------------------------------------------------------------
# Global
# --------------------------------------------------------------
# Limitations:
#     - Starship doesn't have global spacing control, so we keep
#       modules themselves fairly compact.
# --------------------------------------------------------------

add_newline = true
palette = "airline"

# LEFT PROMPT: [ user ] [ host ] [ cwd ] [ git ]
#                └─ [  ] or [ 󰝆 ]
# RIGHT PROMPT: ......[ time ] [ cmd_duration_sec ]
format = """
${custom.user}[](fg:chick bg:time_bg)${custom.short_host}[](bg:blue fg:time_bg)$container[](bg:orange fg:blue)$directory$git_branch$git_status[](fg:git_bg)$fill$time $cmd_duration$status
$character
"""

# Right prompt Not Used
right_format = ""

[palettes.airline]
bg          = "#1c1c1c"   # terminal background blending
section_bg  = "#2a2a2a"   # dark neutral for separation
gainsboro   = "#DCDCDC"

# Main blocks
user_bg     = "#A7C7E7"   # pastel baby blue
mustard     = "#E8C875"
chick       = "#F7F5A0"
orange      = "#FFA590"
dir_bg      = "#D6C6E1"   # soft lilac
git_bg      = "#E0B0DF"
docker_bg   = "#F4C2C2"   # baby pink
time_bg     = "#C8D3CF"   # mint pastel
dur_bg      = "#FFF2A1"   # pastel sunshine yellow

# Functional
error_fg    = "#DC143C"
error_bg    = "#FFB5A7"   # pastel coral (visible but soft)
warn_bg     = "#FFD1DC"   # pastel blush
ok_bg       = "#C8F3CF"   # mint green for success

fg          = "#1c1c1c"   # dark text on pastel blocks
dim         = "#444444"   # subtle separators

# git status
success_fg    = "#00F651"   # emerald green
conflict_fg   = "#7A0C0C"   # blood red
untracked_fg  = "#8B0000"   # blood red
stashed_fg    = "#0A4FFF"   # royal blue
staged_fg     = "#00A651"   # emerald green
modified_fg   = "#8B0000"   # dark crimson
renamed_fg    = "#7B3F00"   # chocolate brown
deleted_fg    = "#E00032"   # scarlet red

# --------------------------------------------------------------
# Host / user / directory
# --------------------------------------------------------------

[username]
disabled = true

[custom.user]
command = "echo $STARSHIP_USER_ALIAS"
when = true
format = "[](fg:chick)[ $output](bold fg:fg bg:chick)"

[directory]
truncation_length = 3          # ~/proj/ai/…
truncate_to_repo = true        # stop at repo root
read_only = ""
format = "[  $path](bold fg:fg bg:orange)[](fg:orange bg:git_bg)"

# --------------------------------------------------------------
# Git
# --------------------------------------------------------------

[git_branch]
symbol = "󰊢"

truncation_length = 10
truncation_symbol = "…"
format = "[ $symbol $branch ](bold fg:fg bg:git_bg)"

[git_status]
ignore_submodules = true
conflicted = "[ $count ](fg:conflict_fg bg:git_bg)"
untracked  = "[ $count ](fg:untracked_fg bg:git_bg)"
stashed    = "[ $count ](fg:stashed_fg bg:git_bg)"
modified   = "[ $count ](bold fg:modified_fg bg:git_bg)"
staged     = "[ $count ](bold fg:staged_fg bg:git_bg)"
renamed    = "[󰜴 $count ](fg:renamed_fg bg:git_bg)"
deleted    = "[ $count ](fg:deleted_fg bg:git_bg)"
ahead      = " ${count}"
behind     = " ${count}"
diverged   = " ${ahead_count}⇣${behind_count}"
format     = "[$all_status$ahead_behind](bold fg:fg bg:git_bg)"

# --------------------------------------------------------------
# Languages / environments
# --------------------------------------------------------------

[python]
symbol = ""
style = "chick"
pyenv_version_name = true
format = "[${symbol}${version}]($style)"

[container]
symbol = "  "
format = "[ $symbol ](bold fg:stashed_fg bg:blue)"

[hostname]
#ssh_only = false # also inside a container
#format = "[$hostname](bold fg:fg bg:time_bg)"
disabled = true

[custom.short_host]
command = '''
hn="$(hostname -s)"

# If hostname equals username → show "me"
if [ "$hn" = 'Lab-S-Yehudats-MacBook-Pro' ]; then
  echo 
  exit 0
fi

# Trim to max 8 chars, append "..." if needed
if [ "${#hn}" -gt 8 ]; then
  hn="${hn:0:8}..."
fi
echo " $hn"
'''
when = "true"
format = "[ $output ](bold fg:fg bg:time_bg)"

# --------------------------------------------------------------
# Time / duration / status / battery
# --------------------------------------------------------------

[time]
disabled = false
format = "[󰥔 $time](dimmed)"
time_format = "%H:%M"

[cmd_duration]
disabled = false
min_time = 500                # ms; only show if > 0.5s
format = "[󱦟${duration}](dimmed)"

[status]
disabled = false
format = "[E$status](bold red)"
map_symbol = true             # use common symbols
pipestatus = true

[battery]
disabled = true
full_symbol = ""
charging_symbol = "⚡"
format = "[$symbol$percentage]($style)"
threshold = 25

[[battery.display]]
threshold = 25
style = "bold red"

# --------------------------------------------------------------
# Prompt character
# --------------------------------------------------------------

[character]
disabled             = false
success_symbol       = "[ └─ ](fg:staged_fg)"
error_symbol         = "[ └─ ](fg:red)"
vimcmd_symbol        = "[ └─ 󰝆](fg:gainsboro)"
vimcmd_visual_symbol = "[ └─ ](fg:dir_bg)"

